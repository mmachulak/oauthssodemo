<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>OpenID Connect Demo</title>

    <link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/themes/cupertino/jquery-ui.css" rel="stylesheet" />
    <link type="text/css" href="/css/main.css" rel="stylesheet" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js"></script>

    <link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css" />
    <link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js"></script>
    <script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/scripts/shAutoloader.js"></script>

    <script type="text/javascript">
        function initPage() {
            $("#accordion").accordion({ header: "h3", navigation: true, active: 0 });
            $("#accordion h3 a").click(function() {
                window.location = $(this).attr('href');
                return false;
            });
            SyntaxHighlighter.all();
            $("#header h1").click(function(){
                window.location ='/step/0';
            });
            $('button').button();

        }
        $(document).ready(function() {initPage();});
    </script>

</head>
<body>
<div id="container">
    <div id="header"><h1>OpenID Connect Demo w/Google (Python library)</h1>
        <div id='loginBox'>
            {% if account %}
                Hello {{account.given_name}}!
                {% if account.email %}
                    ({{account.email}})
                {% endif %}
                {% if account.link %}
                    <a href='{{account.link}}' target='_blank'>
                        {% if account.picture %}
                            <img src="{{account.picture}}" alt="profile picture" width="10%"/>
                        {% endif %}
                    </a>
                {% else %}
                    {% if account.picture %}
                        <img src="{{account.picture}}" alt="profile picture" width="10%"/>
                    {% endif %}
                {% endif %}
                <a href='/logout'>Logout</a><a href='/logoutandremove'>Remove</a>
            {% else %}
                <a href='{{ targetUrl }}'><button id='connectButton'>Connect Me!</button></a>
            {% endif %}
        </div>
    </div>

    <div id="wrapper">
        <div id="content">
            {% block content %}{% endblock %}
        </div>
    </div>
    <div id="navigation">
        <div id="accordion">
            <div>
                <h3><a href="/step/0">Step 0: Configure library</a></h3>
            </div>
            <div>
                <h3><a href="/step/1">Step 1: Show login UI</a></h3>
            </div>
            <div>
                <h3><a href="/step/2">Step 2: Grab token</a></h3>
            </div>
            <div>
                <h3><a href="/step/3">Step 3: Validate it</a></h3>
            </div>
            <div>
                <h3><a href="/step/4">Step 4: Get UserInfo</a></h3>
            </div>
        </div>
    </div>
    <div id="extra">
    </div>
    <div id="footer">
        <hr>
        <p>This site demonstrates Google's support for OpenID Connect. It's a prototype and should be treated that way. Source available at <a href="https://github.com/mmachulak/oauthssodemo">GitHub</a> Prototype based on <a href="http://oauthssodemo.appspot.com">OpenID Connect Demo w/Google</a>.
        </p>
        <img src="http://code.google.com/appengine/images/appengine-silver-120x30.gif" alt="Powered by Google App Engine" />
    </div>
</div>
</body>
</html>